<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

  <import resource="classpath:edu/arizona/kra/CustomCoreSpringBeans.xml"/>
  <import resource="classpath:edu/arizona/kra/UA-BiDataSourceSpringBeans.xml"/>

  <!-- Subaward Invoice Feed Batch Job -->
  <!--<bean id="schedulerFactory" class="edu.arizona.kra.subaward.batch.SubawardBatchSchedulerFactoryBean">-->
    <!--<property name="triggers">-->
      <!--<list>-->
        <!--<ref local="subawardInvoiceFeedTrigger"/>-->
      <!--</list>-->
    <!--</property>-->
    <!--&lt;!&ndash;-->
        <!--Injecting these services into the scheduler factory so it can be added to the job context-->
        <!--which is passed to the executeInternal method of the job class.-->
    <!--&ndash;&gt;-->
    <!--<property name="schedulerContextAsMap">-->
      <!--<map>-->
        <!--<entry key="cfdaService">-->
          <!--<ref bean="cfdaService"/>-->
        <!--</entry>-->
        <!--<entry key="parameterService">-->
          <!--<ref bean="parameterService"/>-->
        <!--</entry>-->
        <!--<entry key="kcNotificationService">-->
          <!--<ref bean="kcNotificationService"/>-->
        <!--</entry>-->
        <!--<entry key="reportTrackingNotificationService">-->
          <!--<ref bean="reportTrackingNotificationService"/>-->
        <!--</entry>-->
        <!--<entry key="user" value="${batchJobUserName}"/>-->
      <!--</map>-->
    <!--</property>-->
    <!--<property name="quartzProperties">-->
      <!--<props>-->
        <!--<prop key="org.quartz.jobStore.tablePrefix">${kcQuartzDatabasePrefix}</prop>-->
      <!--</props>-->
    <!--</property>-->
    <!--<property name="dataSource" ref="dataSource"/>-->
    <!--&lt;!&ndash;-->
        <!--This is set to true so that the tables are modified when the job is modified, otherwise-->
        <!--manual deletion of values from tables will be required every time job is changed-->
    <!--&ndash;&gt;-->
    <!--<property name="overwriteExistingJobs" value="true"/>-->
  <!--</bean>-->



  <!-- Quartz configuration for SubawardInvoiceFeed batch job-->
  <!-- Use JobDetail here since the MethodInvokingJobDetailFactoryBean does not support persistent storage-->
  <!--<bean id="subawardInvoiceFeedBatchJobDetail" class="org.quartz.JobDetail">-->
    <!--<property name="jobClass" value="edu.arizona.kra.subaward.batch.SubawardInvoiceFeedJob"/>-->
    <!--<property name="name" value="subawardInvoiceFeedBatchJobDetail"/>-->
  <!--</bean>-->


  <!--<bean id="subawardInvoiceFeedTrigger" class="org.kuali.kra.scheduling.quartz.KcCronTriggerBean" parent="cronTrigger">-->
    <!--<property name="jobDetail" ref="subawardInvoiceFeedBatchJobDetail"/>-->
    <!--<property name="parameterService" ref="parameterService"/>-->
    <!--<property name="dateTimeService" ref="dateTimeService"/>-->
    <!--<property name="cronExpressionParameterName" value="subAwardInvoiceFeedJobRunSchedule"/>-->
    <!--<property name="triggerEnabledParameterName" value="subAwarInvoiceFeedJobEnabled"/>-->
    <!--<property name="dataIntervalParameterName" value="subAwardInvoiceFeedJobDataIntervalsDays"/>-->
    <!--<property name="parameterNamespace" value="KC-SUBAWARD"/>-->
    <!--<property name="parameterComponent" value="Batch"/>-->
  <!--</bean>-->

  <bean id="subawardInvoiceFeedJob" parent="scheduledJobDescriptor" class="edu.arizona.kra.sys.batch.JobDescriptor">
    <property name="steps">
      <list>
        <ref bean="importGLDataStep"/>
      </list>
    </property>
  </bean>

  <bean id="importGLDataStep" class="edu.arizona.kra.subaward.batch.ImportGLDataStep" parent="step">
    <property name="glDataImportService">
      <ref bean="glDataImportService"/>
    </property>
  </bean>


  <bean id="BiGlFeedDao" class="edu.arizona.kra.subaward.batch.dao.ojb.BiGlFeedDaoBasicDS">
    <property name="dataSource" ref="arizona.edu.biNonTransactionalDataSource"/>
  </bean>

  <bean id="SubawardGlFeedDao" parent="platformAwareDao"
        class="edu.arizona.kra.subaward.batch.dao.ojb.SubawardGlFeedDaoOjb"/>

  <bean id="glDataImportService" class="edu.arizona.kra.subaward.batch.service.impl.GlDataImportServiceImpl">
    <property name="businessObjectService" ref="businessObjectService"/>
    <property name="biGLFeedDao">
      <ref bean="BiGlFeedDao"/>
    </property>
    <property name="subawardGLFeedDao">
      <ref bean="SubawardGlFeedDao"/>
    </property>
  </bean>


</beans>
